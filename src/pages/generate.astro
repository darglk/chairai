---
import Layout from "@/layouts/Layout.astro";
import ImageGeneratorContainer from "@/components/ImageGeneratorContainer";

// Middleware checks
if (!Astro.locals.user) {
  return Astro.redirect("/login");
}

if (Astro.locals.user.role !== "client") {
  return Astro.redirect("/");
}

const user = Astro.locals.user;
---

<Layout>
  <main
    class="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 py-12 px-4"
  >
    <div class="container mx-auto max-w-4xl">
      <div class="mb-12 text-center">
        <h1 class="text-4xl font-bold text-slate-900 dark:text-slate-50 mb-4">Generator Obrazów AI</h1>
        <p class="text-lg text-slate-600 dark:text-slate-400">
          Opisz mebel, który sobie wyobrażasz, a nasza sztuczna inteligencja wygeneruje jego wizualizację
        </p>
      </div>

      <div class="bg-white dark:bg-slate-900 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 p-8">
        <ImageGeneratorContainer client:load user={user} />
      </div>
    </div>
  </main>
</Layout>
